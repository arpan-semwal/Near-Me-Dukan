package com.phonepepaymentsdk

import android.content.Intent
import com.facebook.react.bridge.NativeMap
import com.facebook.react.bridge.Promise
import com.facebook.react.bridge.WritableNativeMap
import com.phonepe.intent.sdk.api.PhonePeInitException
import com.phonepepaymentsdk.GlobalConstants.Response.FAILURE
import com.phonepepaymentsdk.GlobalConstants.Response.INITIALIZE_PHONEPE_SDK

object DataUtil {

    fun Exception.handleException(promise: Promise) {
        LogUtil.logInfo("handleException: ${this.localizedMessage}")
        when (this) {
            is PhonePeInitException, is UninitializedPropertyAccessException ->
                promise.reject(INITIALIZE_PHONEPE_SDK, Throwable(INITIALIZE_PHONEPE_SDK))

            else -> promise.reject(FAILURE, this)
        }
    }

    fun Intent?.convertResultToString(): String {
        var result = ""
        if (this?.extras != null && this.extras!!.keySet().size > 0)
            for (key in this.extras!!.keySet()) result += "$key:${this.extras!![key]}"
        return result
    }

}